<%- include('../layouts/header') %>

  <div class="content-wrapper">
    <section class="content-header">
      <h1>USERS PROFILE</h1>
    </section>
    
    <section class="content">
      <div style="background-color: white;">
        <div class="div-all-item row">
          <!-- search -->
          <div class="filter-info-user">
            <label>Search</label>
            <input type="text" placeholder="megaID/username" id="search-user" value="">
          </div>

          <!-- select column filter -->
          <!-- <div class="filter-info-user">
            <label>Select Column</label>
            <select id="filter-sel-column">
              <option selected value="-1">none</option>
              <option value="0">code đã nhập</option>
              <option value="1">lượt chơi còn</option>
              <option value="2">lượt chơi đã sử dụng</option>
            </select>
          </div> -->

          <!-- from date -->
          <div class="filter-info-user">
            <label>From</label>
            <input type="date" placeholder="" id="from-date-enter-code" value="">
          </div>

          <!-- to date -->
          <div class="filter-info-user">
            <label>To</label>
            <input type="date" placeholder="" id="to-date-enter-code" value="">
          </div>
        </div>

        <table id="user-info-table" class="footable table table-stripped">
          <thead>
            <tr>
              <th style="font-weight: bold;">MEGA ID</th>
              <th style="font-weight: bold;">SĐT</th>
              <th style="font-weight: bold;">CODE</th>
              <th style="font-weight: bold;">THỜI GIAN</th>
            </tr>
          </thead>
          <tbody>
            <% for (let d of data) { %>
              <tr>
                <td><%= d['mega_code'] %></td>
                <td><%= d['phone'] %></td>
                <td><%= d['code'] %></td>
                <td><%= d['time'] %></td>
              </tr>
            <% } %>
          </tbody>
        </table>
        <div id="pagination">
          
        </div>
      </div>

    </section>
  </div>

  <script>

    $(document).ready(() => {

      getPagination();

    });

    function getPagination() {
      let rowsShown = 10;
      let rowsTotal = $('#user-info-table tbody tr').length;
      let numPages  = rowsTotal / rowsShown;
      for (let i=0; i<numPages; i++) {
        $('#pagination').append(`<a href="#" class="page" data-id="${i}">${i+1}</a>`);
      }

      $('#user-info-table tbody tr').hide();
      $('#user-info-table tbody tr').slice(0, rowsShown).show();

      $('body').delegate('.page', 'click', (event) => {
        let currPage  = event.currentTarget.attributes.getNamedItem('data-id').value;
        let startItem = currPage * rowsShown;
        let endItem   = startItem + rowsShown;

        console.log($('#user-info-table tbody tr').length);

        $('#user-info-table tbody tr')
          .css('opacity', '0.0')
          .hide()
          .slice(startItem, endItem)
          .css('display', '')
          .animate({ opacity: 1 }, 300);
      });
    }

  </script>

<%- include('../layouts/footer') %>